/*
 *  test_distributed_connect.sli
 *
 *  This file is part of NEST
 *
 *  Copyright (C) 2012 by
 *  The NEST Initiative
 *
 *  See the file AUTHORS for details.
 *
 *  Permission is granted to compile and modify
 *  this file for non-commercial use.
 *  See the file LICENSE for details.
 *
 */

/* BeginDocumentation
Name: testsuite::test_distributed_connect - sli script for testing that nodes can be
  connected without error in a distributed simulation with and without a call to
  ResetKernel

Synopsis: nest_indirect test_distributed_connect --> success

Description:
  Two nodes are created, connected, and their statuses queried. The Kernel is reset
  and then the same network is recreated. This tests that access to information 
  about non-local nodes is working.

Author: February 2012, Kunkel & Morrison
*/

/unittest (8831) require
/unittest using

[1 2 ] % check for 1 and 2 processes
{
  /iaf_neuron Create /n Set
  /iaf_psc_alpha Create /m Set

  n m Connect
  n GetStatus ;
  m GetStatus ;

  ResetKernel

  /iaf_neuron Create /n Set
  /iaf_psc_alpha Create /m Set

  n m Connect
  n GetStatus ;
  m GetStatus ;
  true
}
distributed_collect_assert_or_die
